(function(e){function t(t){for(var a,i,o=t[0],u=t[1],d=t[2],l=0,g=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&g.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(g.length)g.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("StudentList",{attrs:{studentData:e.students},on:{getData:e.getData}})],1)},s=[],i=(n("d3b7"),n("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"StudentList"},[a("img",{attrs:{alt:"SBS Attendance",id:"SBS_logo",src:n("cf05")}}),a("google-signin-btn",{attrs:{label:e.isSignedIn,"custom-class":"signinButton"},on:{click:e.signIn}}),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",id:"searchBox",placeholder:"Student name or ID",autofocus:""},domProps:{value:e.search},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(e.filteredStudents)},input:function(t){t.target.composing||(e.search=t.target.value)}}}),a("label",{attrs:{for:"grade"}},[e._v("Student grade:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.grade,expression:"grade"}],attrs:{id:"grade"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.grade=t.target.multiple?n:n[0]}}},[a("option",{attrs:{value:"",disabled:""}},[e._v("Please select:")]),a("option",{attrs:{value:"7"}},[e._v("7th Grade")]),a("option",{attrs:{value:"8"}},[e._v("8th Grade")]),a("option",{attrs:{value:"9"}},[e._v("9th Grade")]),a("option",{attrs:{value:"10"}},[e._v("10th Grade")]),a("option",{attrs:{value:"11"}},[e._v("11th Grade")]),a("option",{attrs:{value:"12"}},[e._v("12th Grade")])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"all",value:"",checked:""},domProps:{checked:e._q(e.gender,"")},on:{change:function(t){e.gender=""}}}),a("label",{attrs:{for:"all"}},[e._v("All students")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"male",value:"Male"},domProps:{checked:e._q(e.gender,"Male")},on:{change:function(t){e.gender="Male"}}}),a("label",{attrs:{for:"male"}},[e._v("Boys")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"female",value:"Female"},domProps:{checked:e._q(e.gender,"Female")},on:{change:function(t){e.gender="Female"}}}),a("label",{attrs:{for:"female"}},[e._v("Girls")])])]),a("button",{directives:[{name:"show",rawName:"v-show",value:"Sign Out"==e.isSignedIn,expression:"isSignedIn == 'Sign Out'"}],attrs:{type:"submit",id:"submitButton"},on:{click:e.submit}},[e._v("Submit")]),a("div",{attrs:{id:"remainingStudents"}},e._l(e.filteredStudents,(function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:"Sign Out"==e.isSignedIn,expression:"isSignedIn == 'Sign Out'"}],key:n,staticClass:"students",on:{click:function(t){return e.attended(e.filteredStudents,n)}}},[a("img",{staticClass:"student_image",attrs:{src:"https://bbk12e1-cdn.myschoolcdn.com/ftpimages/935/user/"+t["Large Filename"],alt:t["name"]}}),a("span",{staticClass:"student_name"},[e._v(e._s(t["name"]))])])})),0),a("div",{attrs:{id:"checkedStudents"}},e._l(e.checkedStudents,(function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:"Sign Out"==e.isSignedIn,expression:"isSignedIn == 'Sign Out'"}],key:n,staticClass:"students",on:{click:function(t){return e.undo(e.checkedStudents,n)}}},[a("img",{staticClass:"student_image",attrs:{src:"https://bbk12e1-cdn.myschoolcdn.com/ftpimages/935/user/"+t["Large Filename"],alt:t["name"]}}),a("span",{staticClass:"student_name"},[e._v(e._s(t["name"]))])])})),0)],1)}),o=[],u=(n("4de4"),n("4160"),n("fb6a"),n("b0c0"),n("ac1f"),n("25f0"),n("466d"),n("4d90"),n("841c"),n("159b"),{name:"StudentList",data:function(){return{isSignedIn:"",search:"",gender:"",grade:""}},props:["studentData"],methods:{signIn:function(){var e=this;this.$gapi.isSignedIn().then((function(t){t?e.$gapi.signOut().then((function(){alert("User signed out."),e.isSignedIn="Sign In"})):e.$gapi.signIn().then((function(t){alert("Signed in as "+t.name+"."),e.isSignedIn="Sign Out",e.$emit("getData")})).catch((function(e){alert("Error: "+e.error+".")}))})),document.getElementById("searchBox").focus()},attended:function(e,t){e[t]["isPresent"]=!0},enter:function(e){void 0!=e[0]&&(e[0]["isPresent"]=!0),this.search=""},undo:function(e,t){e[t]["isPresent"]=!1},submit:function(){var e=this;this.search="";var t=new Date,n=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();t=a+"/"+n+"/"+r;var s=this.filteredStudents,i=[];i.push([t]),s.forEach((function(e){i.push([e["name"]])})),""==this.grade?alert("Please select a grade."):confirm("Are you sure that you want to submit attendance for ".concat(this.grade,"th grade?"))&&this.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(this.grade,"th-Grade"),method:"GET"}).then((function(n){void 0==n.result.values||n.result.values[0][0]!=t?e.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(e.grade,"th-Grade!A:A:clear"),method:"POST"}).then((function(){e.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(e.grade,"th-Grade!A:A?valueInputOption=RAW"),method:"PUT",body:{range:"".concat(e.grade,"th-Grade!A:A"),majorDimension:"ROWS",values:i}}).then((function(){alert("Submitted successfully.")}),(function(e){alert("Error: "+e.result.error.message)}))}),(function(e){alert("Error: "+e.result.error.message)})):e.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(e.grade,"th-Grade!A:A:append?valueInputOption=RAW"),method:"POST",body:{range:"".concat(e.grade,"th-Grade!A:A"),majorDimension:"ROWS",values:i.slice(1)}}).then((function(){alert("Updated successfully.")}),(function(e){alert("Error: "+e.result.error.message)}))}),(function(e){alert("Error: "+e.result.error.message)}))}},computed:{filteredStudents:function(){var e,t,n=this,a=new Date,r=a.getFullYear(),s=a.getMonth();switch(e=s>=8?r++:r,this.grade){case"7":t=(e+5).toString();break;case"8":t=(e+4).toString();break;case"9":t=(e+3).toString();break;case"10":t=(e+2).toString();break;case"11":t=(e+1).toString();break;case"12":t=e.toString();break;default:t="";break}return this.studentData.filter((function(e){return(e["name"].toLowerCase().match(n.search.toLowerCase())||e["Student ID"].match(n.search))&&e["Gender"].match(n.gender)&&e["Grad Year"].match(t)&&0==e["isPresent"]}))},checkedStudents:function(){return this.studentData.filter((function(e){return 1==e["isPresent"]}))}},mounted:function(){var e=this,t=document.getElementById("searchBox"),n=document.getElementById("all"),a=document.getElementById("male"),r=document.getElementById("female"),s=document.getElementById("grade");function i(){t.focus()}n.addEventListener("change",i,!1),a.addEventListener("change",i,!1),r.addEventListener("change",i,!1),s.addEventListener("change",i,!1),this.$gapi.isSignedIn().then((function(t){t?(e.isSignedIn="Sign Out",e.$emit("getData")):e.isSignedIn="Sign In"}))}}),d=u,c=(n("e393"),n("2877")),l=Object(c["a"])(d,i,o,!1,null,"058e74d8",null),g=l.exports,h={name:"App",data:function(){return{students:[]}},components:{StudentList:g},methods:{convertJSON:function(e){for(var t=[],n=e[0],a=1;a<e.length;a++){for(var r={},s=e[a],i=0;i<n.length;i++)r[n[i]]=s[i];if(""==r["Nickname"]){var o=r["First Name"]+" "+r["Last Name"];r["name"]=o}else{var u=r["Nickname"]+" "+r["Last Name"];r["name"]=u}r["isPresent"]=!1,t.push(r)}return t},getData:function(){var e=this;this.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1TQjA6ZdRGgQpH2phhl3Mz1HaM8nQQ8YoKQJLCuPqoGs/values/Sheet1",method:"GET"}).then((function(t){e.setData(e.convertJSON(t.result.values))}),(function(e){alert("Error: "+e.result.error.message)}))},setData:function(e){this.students=e}}},m=h,p=Object(c["a"])(m,r,s,!1,null,null,null),f=p.exports,v=n("485e"),S={apiKey:"AIzaSyDt2VxRLzdi8qL2Tl_SVTlOV5XVhTvTt94",clientId:"954999908134-m0bcfcjvukvlbh6hosk4uj8mhqfm7p3o.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]};a["a"].use(v["a"],S),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(f)}}).$mount("#app")},cf05:function(e,t,n){e.exports=n.p+"img/logo.3006d8ff.png"},e393:function(e,t,n){"use strict";var a=n("f74a"),r=n.n(a);r.a},f74a:function(e,t,n){}});
//# sourceMappingURL=app.92e73b44.js.map