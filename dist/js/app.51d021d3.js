(function(e){function t(t){for(var s,i,o=t[0],d=t[1],u=t[2],l=0,g=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);c&&c(t);while(g.length)g.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var d=n[o];0!==a[d]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},a={app:0},r=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"13f8":function(e,t,n){"use strict";var s=n("32a9"),a=n.n(s);a.a},"32a9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("StudentList")],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"StudentList"},[s("img",{attrs:{alt:"SBS Attendance",id:"SBS_logo",src:n("cf05")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.image,expression:"image != ''"}],attrs:{src:e.image,alt:"User image",id:"user_image"}}),s("google-signin-btn",{attrs:{label:e.isSignedIn,"custom-class":"signinButton"},on:{click:e.signIn}}),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",id:"searchBox",placeholder:"Student name or ID",autofocus:""},domProps:{value:e.search},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(e.filteredStudents)},input:function(t){t.target.composing||(e.search=t.target.value)}}}),s("label",{attrs:{for:"grade"}},[e._v("Student grade:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.grade,expression:"grade"}],attrs:{id:"grade",disabled:"Sign In"==e.isSignedIn},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.grade=t.target.multiple?n:n[0]},e.getData]}},[s("option",{attrs:{value:"",disabled:""}},[e._v("Please select:")]),s("option",{attrs:{value:"7"}},[e._v("7th Grade")]),s("option",{attrs:{value:"8"}},[e._v("8th Grade")]),s("option",{attrs:{value:"9"}},[e._v("9th Grade")]),s("option",{attrs:{value:"10"}},[e._v("10th Grade")]),s("option",{attrs:{value:"11"}},[e._v("11th Grade")]),s("option",{attrs:{value:"12"}},[e._v("12th Grade")])]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"all",value:"",checked:"",disabled:"Sign In"==e.isSignedIn},domProps:{checked:e._q(e.gender,"")},on:{change:function(t){e.gender=""}}}),s("label",{attrs:{for:"all"}},[e._v("All students")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"male",value:"Male",disabled:"Sign In"==e.isSignedIn},domProps:{checked:e._q(e.gender,"Male")},on:{change:function(t){e.gender="Male"}}}),s("label",{attrs:{for:"male"}},[e._v("Boys")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",id:"female",value:"Female",disabled:"Sign In"==e.isSignedIn},domProps:{checked:e._q(e.gender,"Female")},on:{change:function(t){e.gender="Female"}}}),s("label",{attrs:{for:"female"}},[e._v("Girls")])])]),s("button",{directives:[{name:"show",rawName:"v-show",value:""!=e.students.toString(),expression:"students.toString() != ''"}],attrs:{type:"submit",id:"submitButton"},on:{click:e.submit}},[e._v("Submit")]),s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.students.toString(),expression:"students.toString() != ''"}],attrs:{id:"remainingStudents"}},e._l(e.filteredStudents,(function(t,n){return s("div",{key:n,staticClass:"students",on:{click:function(n){return e.attended(t)}}},[s("img",{staticClass:"student_image",attrs:{src:"https://bbk12e1-cdn.myschoolcdn.com/ftpimages/935/user/"+t["Large Filename"],alt:t["name"]}}),s("span",{staticClass:"student_name"},[e._v(e._s(t["name"]))])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.students.toString(),expression:"students.toString() != ''"}],attrs:{id:"checkedStudents"}},e._l(e.checkedStudents,(function(t,n){return s("div",{key:n,staticClass:"students",on:{click:function(n){return e.undo(t)}}},[s("img",{staticClass:"student_image",attrs:{src:"https://bbk12e1-cdn.myschoolcdn.com/ftpimages/935/user/"+t["Large Filename"],alt:t["name"]}}),s("span",{staticClass:"student_name"},[e._v(e._s(t["name"]))])])})),0)],1)},o=[],d=(n("99af"),n("4de4"),n("4160"),n("c975"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("466d"),n("4d90"),n("841c"),n("159b"),n("ddb0"),{name:"StudentList",data:function(){return{isSignedIn:"",search:"",gender:"",grade:"",image:"",students:[]}},methods:{signIn:function(){var e=this;this.$gapi.isSignedIn().then((function(t){t?e.$gapi.signOut().then((function(){alert("User signed out."),e.isSignedIn="Sign In",e.image="",e.students=[]})):e.$gapi.signIn().then((function(t){alert("Signed in as "+t.name+"."),e.image=t.image,e.isSignedIn="Sign Out"})).catch((function(e){alert("Error: "+e.error+".")}))})),document.getElementById("searchBox").focus()},convertJSON:function(e){for(var t=[],n=e[0],s=1;s<e.length;s++){for(var a={},r=e[s],i=0;i<n.length;i++)a[n[i]]=r[i];if(""==a["Nickname"]){var o=a["First Name"]+" "+a["Last Name"];a["name"]=o}else{var d=a["Nickname"]+" "+a["Last Name"];a["name"]=d}a["isPresent"]=!1,a["presentTime"]="",t.push(a)}return t},getData:function(){var e=this;this.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1TQjA6ZdRGgQpH2phhl3Mz1HaM8nQQ8YoKQJLCuPqoGs/values/Sheet1",method:"GET"}).then((function(t){document.getElementById("grade").setAttribute("disabled","");var n,s=new Date,a=s.getFullYear(),r=s.getMonth();switch(r>=7&&a++,e.grade){case"7":n=(a+5).toString();break;case"8":n=(a+4).toString();break;case"9":n=(a+3).toString();break;case"10":n=(a+2).toString();break;case"11":n=(a+1).toString();break;case"12":n=a.toString();break}e.students=e.convertJSON(t.result.values).filter((function(e){return e["Grad Year"]==n}))}),(function(e){alert("Error: "+e.result.error.message)}))},getTime:function(){var e=new Date,t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return e=t+":"+n+":"+s,e},attended:function(e){this.students[this.students.indexOf(e)]["isPresent"]=!0,this.students[this.students.indexOf(e)]["presentTime"]=this.getTime()},enter:function(e){void 0!=e[0]&&(this.students[this.students.indexOf(e[0])]["isPresent"]=!0,this.students[this.students.indexOf(e[0])]["presentTime"]=this.getTime()),this.search=""},undo:function(e){this.students[this.students.indexOf(e)]["isPresent"]=!1,this.students[this.students.indexOf(e)]["presentTime"]=""},writeData:function(e,t){var n=this;this.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(this.grade,"th-Grade!A:A?valueInputOption=RAW"),method:"PUT",body:{range:"".concat(this.grade,"th-Grade!A:A"),majorDimension:"ROWS",values:e}}).then((function(){n.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values:batchUpdate",method:"POST",body:{valueInputOption:"RAW",data:t}})})).then((function(){alert("Submitted successfully.")})).catch((function(e){alert("Error: "+e.result.error.message)}))},submit:function(){var e=this,t=new Date,n=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();t=s+"/"+n+"/"+a;var r=[[t]];this.students.forEach((function(e){r.push([e["name"]])}));var i=[];this.students.forEach((function(t){t["isPresent"]&&i.push({range:"".concat(e.grade,"th-Grade!B").concat(e.students.indexOf(t)+2),majorDimension:"ROWS",values:[[t["presentTime"]]]})})),confirm("Are you sure that you want to submit attendance for ".concat(this.grade,"th grade?"))&&this.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(this.grade,"th-Grade"),method:"GET"}).then((function(n){void 0==n.result.values||n.result.values[0][0]!=t?e.$gapi.request({path:"https://sheets.googleapis.com/v4/spreadsheets/1hf-s8uJXXTP_-XsXm8PtRQhsks48a-CWGtlEtroIzm4/values/".concat(e.grade,"th-Grade!B:B:clear"),method:"POST"}).then(e.writeData(r,i)).catch((function(e){alert("Error: "+e.result.error.message)})):e.writeData(r,i)}),(function(e){alert("Error: "+e.result.error.message)}))}},computed:{filteredStudents:function(){var e=this;return this.students.filter((function(t){return(t["name"].toLowerCase().match(e.search.toLowerCase())||t["Student ID"].match(e.search))&&t["Gender"].match(e.gender)&&0==t["isPresent"]}))},checkedStudents:function(){var e=this;return this.students.filter((function(t){return t["Gender"].match(e.gender)&&1==t["isPresent"]}))}},mounted:function(){var e=this,t=document.getElementById("searchBox"),n=document.getElementById("all"),s=document.getElementById("male"),a=document.getElementById("female"),r=document.getElementById("grade");function i(){t.focus()}n.addEventListener("change",i,!1),s.addEventListener("change",i,!1),a.addEventListener("change",i,!1),r.addEventListener("change",i,!1),this.$gapi.isSignedIn().then((function(t){e.isSignedIn=t?"Sign Out":"Sign In"}))}}),u=d,c=(n("13f8"),n("2877")),l=Object(c["a"])(u,i,o,!1,null,"40760eab",null),g=l.exports,h={name:"App",components:{StudentList:g}},m=h,p=Object(c["a"])(m,a,r,!1,null,null,null),f=p.exports,v=n("485e"),S={apiKey:"AIzaSyDt2VxRLzdi8qL2Tl_SVTlOV5XVhTvTt94",clientId:"954999908134-m0bcfcjvukvlbh6hosk4uj8mhqfm7p3o.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]};s["a"].use(v["a"],S),s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(f)}}).$mount("#app")},cf05:function(e,t,n){e.exports=n.p+"img/logo.3006d8ff.png"}});
//# sourceMappingURL=app.51d021d3.js.map